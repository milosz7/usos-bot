<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/css/output.css') }}">
</head>
<body class="bg-purple_1 h-screen flex">

    <!-- Sidebar for Chat History -->
    <div id="sidebar" class="w-64 bg-purple_0 text-white flex flex-col p-4 hidden flex">
        <h2 class="text-xl font-bold mb-4">Historia</h2>
        <div class="flex flex-col overflow-y-auto space-y-2">
            <!-- Chat History items -->
            <button class="bg-purple_5 p-3 rounded-lg hover:bg-purple_6 focus:outline-none">
                Chat #1
            </button>
            <button class="bg-purple_5 p-3 rounded-lg hover:bg-purple_6 focus:outline-none">
                Chat #2
            </button>
            <!-- Add more chat history buttons here -->
        </div>
    </div>

    <!-- Main Chat Area -->
    <div class="flex flex-col flex-grow bg-purple_1">

        <!-- Toggle Button for Sidebar (visible only on small screens) -->
        <div class="p-4 bg-purple_0 flex justify-between items-center">
            <button id="toggleSidebarBtn" class="bg-purple_0 border-2 border-purple_3 text-white px-4 py-2 rounded-lg hover:bg-purple_3">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
                </svg>
            </button>
            <p class="text-purple_6 text-3xl">{{user['name']}}</p>
            <img id="picture_logout" class="rounded-3xl hover:cursor-pointer hover:opacity-75 max-w-[50px] max-h-[50px] object-contain" src="{{ user['picture'] }}" title="Logout" onerror="this.onerror=null; this.src='{{ url_for('static', path='icons/user.jpg') }}';">
        </div>

        <!-- Chat Display Area -->
        <div class="flex-grow p-4 overflow-y-auto" id="chatWindow">
            <!-- Chat messages -->
            <div class="mb-4">
                <p class="text-gray-500 text-sm">UsosBot</p>
                <div class="bg-purple_3 p-3 rounded-lg inline-block text-white">
                    Cześć! Jak Ci mogę pomóc?
                </div>
            </div>


            {% for message in messages %}
                <div class="mb-4 {% if message.author == 'human' %} text-right{% endif %}">
                    <p class="text-gray-500 text-sm">
                        {% if message.author == "human" %}
                            Ty
                        {% else %}
                            UsosBot
                        {% endif %}
                    </p>
                    <div class="bg-purple_3 p-3 rounded-lg inline-block text-white">
                        {{ message.content }}
                    </div>
                </div>
            {% endfor %}
            <!-- New messages will be added here -->
        </div>

        <!-- Input Area -->
        <div class="pl-1 pr-1 pb-4 bg-purple_1">
            <form class="flex" id="chatForm">
                <input type="text" id="userInput" placeholder="Napisz wiadomość..."
                       class="bg-purple_3 flex-grow p-2 pl-5 pr-5 rounded-3xl focus:outline-none focus:border-none text-white">
                <button type="submit" class="ml-1 bg-purple_3 text-white px-4 py-2 rounded-3xl hover:bg-purple_4">
                    Wyślij
                </button>
            </form>
        </div>
    </div>
    <script src="{{ url_for('static', path='/scripts/chat_script.js') }}"></script>
</body>
</html>
